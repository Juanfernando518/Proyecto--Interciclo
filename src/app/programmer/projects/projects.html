<div class="container fade-in">
  <header class="header-actions">
    <h1>üìÇ Gesti√≥n de Proyectos</h1>
    <button (click)="openCreate()" class="btn-primary">
      + Nuevo Proyecto
    </button>
  </header>

  <div class="projects-list">
    @for (proj of projects$ | async; track proj.id) {
      <div class="project-item">
        <img [src]="proj.imageUrl || 'https://via.placeholder.com/100'" class="thumb">
        
        <div class="info">
          <h3>{{ proj.title }}</h3>
          <div class="meta">
            <span class="badge" [class.academic]="proj.type === 'academic'">
              {{ proj.type === 'academic' ? 'Acad√©mico' : 'Laboral' }}
            </span>
            <span class="techs">{{ proj.technologies.join(', ') }}</span>
          </div>
        </div>

        <div class="actions">
          <button (click)="openEdit(proj)" class="btn-icon edit" title="Editar">
            ‚úèÔ∏è
          </button>
          <button (click)="deleteProject(proj.id!)" class="btn-icon delete" title="Eliminar">
            üóëÔ∏è
          </button>
        </div>
      </div>
    } @empty {
      <div class="empty-state">
        <p>No tienes proyectos. ¬°Sube el primero para mostrarlo en tu portafolio!</p>
      </div>
    }
  </div>

  @if (showForm) {
    <div class="modal-overlay">
      <div class="modal-content slide-up">
        <h2>{{ isEditing ? 'Editar Proyecto' : 'Nuevo Proyecto' }}</h2>
        
        <form (ngSubmit)="saveProject()">
          
          <div class="form-group">
            <label>T√≠tulo</label>
            <input [(ngModel)]="currentProject.title" name="title" required class="input-field" placeholder="Ej: Sistema de Ventas">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Tipo</label>
              <select [(ngModel)]="currentProject.type" name="type" class="input-field">
                <option value="academic">Acad√©mico</option>
                <option value="laboral">Laboral</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Tecnolog√≠as (separadas por coma)</label>
              <input [(ngModel)]="techString" name="techs" class="input-field" placeholder="Angular, Firebase, Java...">
            </div>
          </div>

          <div class="form-group">
            <label>Descripci√≥n</label>
            <textarea [(ngModel)]="currentProject.description" name="desc" rows="3" class="input-field"></textarea>
          </div>

          <div class="form-group">
            <label>URL Imagen (Portada)</label>
            <input [(ngModel)]="currentProject.imageUrl" name="img" class="input-field" placeholder="https://...">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Link Repositorio</label>
              <input [(ngModel)]="currentProject.repoUrl" name="repo" class="input-field">
            </div>
            <div class="form-group">
              <label>Link Demo (Web)</label>
              <input [(ngModel)]="currentProject.demoUrl" name="demo" class="input-field">
            </div>
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn-primary">Guardar</button>
            <button type="button" (click)="showForm = false" class="btn-outline">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  }
</div>