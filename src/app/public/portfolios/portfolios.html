@if (programmer$ | async; as dev) {

<div class="portfolio-container fade-in">

  <header class="profile-header">
    <img [src]="dev.photoURL || 'https://ui-avatars.com/api/?name='+dev.displayName" class="avatar-lg">
    <div class="profile-info">
      <h1>{{ dev.displayName }}</h1>
      <span class="badge">{{ dev.specialty || 'Programador' }}</span>
      <p>{{ dev.description || 'Sin descripci贸n disponible.' }}</p>
    </div>
  </header>

  <div class="tabs-container">
    <button (click)="setTab('projects')" [class.active]="activeTab === 'projects'" class="tab-btn">
       Portafolio
    </button>
    <button (click)="setTab('advisory')" [class.active]="activeTab === 'advisory'" class="tab-btn">
       Agendar Cita
    </button>
  </div>

  @if (activeTab === 'projects') {
  <section class="content-section">
    <div class="projects-grid">
      @for (proj of projects$ | async; track proj) {
      <div class="project-card">
        <div class="proj-img"
          [style.backgroundImage]="'url(' + (proj.imageUrl || 'https://via.placeholder.com/300') + ')'"></div>
        <div class="proj-body">
          <h3>{{ proj.title }}</h3>
          <p>{{ proj.description }}</p>
          <div class="proj-links">
            @if (proj.repoUrl) { <a [href]="proj.repoUrl" target="_blank">C贸digo</a> }
            @if (proj.demoUrl) { <a [href]="proj.demoUrl" target="_blank">Demo</a> }
          </div>
        </div>
      </div>
      } @empty {
      <div class="empty-state">
        <p>Este programador a煤n no ha publicado proyectos.</p>
      </div>
      }
    </div>
  </section>
  }

  @if (activeTab === 'advisory') {
  <section id="advisory-section" class="content-section">
    <div class="advisory-card">
      <h2>Solicitar Asesor铆a</h2>
      <p>Reserva una sesi贸n con {{ dev.displayName }}.</p>

      @if (authService.currentUser()) {

      @if (!showForm) {
      <button (click)="showForm = true" class="btn-primary full-width animate-bounce">
        Solicitar una Cita Ahora
      </button>
      }

      @if (showForm) {
      <div class="form-container fade-in">
        <div class="form-group">
          <label>Motivo</label>
          <input type="text" [(ngModel)]="topic" placeholder="Ej: Revisi贸n de c贸digo...">
        </div>
        <div class="form-group">
          <label>Tu Tel茅fono (WhatsApp)</label>
          <input type="tel" [(ngModel)]="clientPhone" placeholder="Ej: 593991234567 (Con c贸digo de pa铆s)">
        </div>

        <div class="form-group">
          <label>Fecha y Hora</label>
          <input type="datetime-local" [(ngModel)]="dateRequest">
        </div>

        <div class="form-actions">
          <button (click)="requestAdvisory(dev.uid)" class="btn-primary">Enviar Solicitud</button>
          <button (click)="showForm = false" class="btn-outline">Cancelar</button>
        </div>
      </div>
      }

      } @else {
      <div class="login-alert">
        <p> Debes iniciar sesi贸n para agendar.</p>
        <a routerLink="/auth/login" class="btn-primary">Ir al Login</a>
      </div>
      }

    </div>
  </section>
  }

</div>

}